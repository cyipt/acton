---
title: "Active Transport Options for New Housing Developments: The ACTON project"
# author: "Joey Talbot, Robin Lovelace, Martin Lucas-Smith, Andrew Speakman and Simon Nuttall"
author: "<img src='https://user-images.githubusercontent.com/1825120/75694077-db7a4400-5c9f-11ea-8817-2a024e32c52b.png' width='100%'><br>Joey Talbot, Robin Lovelace<br>(University of Leeds)<br>Martin Lucas-Smith, Simon Nuttall<br>(CycleStreets)<br>Andrew Speakman (PlanIt)<br>Website: cyipt.github.io/acton"
# author: "<br><br><br><br><br><br><br><br><br>Joey Talbot, Robin Lovelace<br>(University of Leeds)<br>Martin Lucas-Smith, Simon Nuttall<br>(CycleStreets)<br>Andrew Speakman (PlanIt)<br>Website: cyipt.github.io/acton"
bibliography: acton-references.bib
# output:
#    rmarkdown::html_vignette:
#      number_sections: true
# vignette: >
#    %\VignetteIndexEntry{The ACTON project}
#    %\VignetteEngine{knitr::rmarkdown}
#    %\VignetteEncoding{UTF-8}
output: bookdown::word_document2 # for docx report
# for pdf format report: # # # 
# output:
#   pagedown::html_paged:
#     # css: ["default-fonts", "default-page", "default"] # not the same
#     css: ["custom-report-styling.css", "default-page", "default"]
#     # css: ["custom-report-styling.css", "default-fonts", "default-page", "default"]
#     toc: true
#     # front_cover: https://user-images.githubusercontent.com/1825120/75694077-db7a4400-5c9f-11ea-8817-2a024e32c52b.png
#     self_contained: true
# # uncomment this line to produce HTML and PDF in RStudio:
# # knit: pagedown::chrome_print
---

```{r, echo=FALSE, eval=FALSE}
# Update report
# get citations - replace 'allrefs' with your references file
citr::tidy_bib_file(rmd_file = "vignettes/the-acton-project.Rmd", messy_bibliography = "~/uaf/allrefs.bib", file = "vignettes/acton-references.bib")
pagedown::chrome_print("file:///tmp/RtmpFEuqIL/preview-2d9b2602f22c.dir/the-acton-project.html", output = "the-acton-project.pdf", wait = 5, timeout = 300)
browseURL("the-acton-project.pdf")
file.size("the-acton-project.pdf")
piggyback::pb_upload("the-acton-project.pdf")
piggyback::pb_download_url("the-acton-project.pdf")
```

```{r setup, include=FALSE, message = FALSE}
knitr::opts_chunk$set(echo = FALSE, out.width = "80%", fig.align = "center")
library(acton)
library(knitr)
library(dplyr)
library(tmap)
tmap_mode("view")
```


# Introduction

Decarbonising the transport sector is an urgent yet challenging component of climate change mitigation policies worldwide [@schock_energy_2007].
Transport was the UK's largest and fastest growing source of carbon emissions before the Covid-19 pandemic [@departmentfortransport_decarbonising_2020], and these emissions must be tackled in order to meet the UK government's legally binding target of net zero carbon emissions by 2050 [@ccc_net_2019]. There are a raft of reasons to tackle car dependency, including overwhelming evidence of the health and social benefits of active travel [@bma_steps_2019;@mueller_health_2015] and the harms caused by air pollution [@shraufnagel_air_2019], which may even include exacerbating the lethality of Covid-19 [@conticini_can_2020]. For all of these reasons it is vital that new housing developments are conducive to low-carbon lifestyles, which means low levels of car ownership and use, and high levels of walking and cycling for everyday trips.

Unfortunately, recent trends have been in the opposite direction to this [@hickman_looking_2007] and it is possible that unsustainable 'business as usual' transport systems become embedded again after social distancing measures are relaxed.
New residential developments have tended to be located in places that lock residents into car dependent lifestyles [@transportfornewhomes_2018], something that central government aims to tackle [@mhclg_planning_2020].
This project aims to support the changes that are needed for healthy transport systems to become the norm, rather than the exception, for new developments.
The methods presented in this report provide a strong foundation for evidence-based planning at local, regional and national levels to help make this happen.

## Components of the ACTON project

The ACTON project brings together several key datasets to answer the question how can we improve new housing developments for walking and cycling? 

To do this we use a range of transport and planning data: 

- data on UK planning applications accessed using www.PlanIt.org.uk
- statistics on accessibility and journey times, from the Department for Transport
- demographic and travel data from the 2011 Census, interpreted using cycle uptake models from the Propensity to Cycle Tool
- routing algorithms developed by CycleStreets.net

This is illustrated in the schematic diagram below.

```{r flow2, echo=FALSE, fig.cap="Schematic diagram of the ACTON project and its four main data sources (boxes)"}
# to be updated in readme code
# knitr::include_graphics("https://cyipt.github.io/acton/reference/figures/README-workflow-1.png")
knitr::include_graphics("../man/figures/README-workflow-1.png")
```

Several outputs were developed during the course of the project.
These, and the potential for further work to inform regional and national development policies, were discussed in workshop held in Leeds in March 2020. 

On the technical side, we have developed open source software to support the project, an R package named `acton`, to ensure reproducibility and to provide a strong foundation for further work.
This package contains functions that aid the import of planning application and accessibility data.

We have tested the methods using a case study of Leeds, to investigate the accessibility for active travel of a set of new housing developments in Leeds, West Yorkshire.
This is documented in the case studies report.

Finally we have laid the foundations needed to develop a nationally scalable indicator to predict active travel mode shares associated with new housing developments. 

These will each be described in greater detail in the remaining sections of this report. 

# The ACTON Datasets

There are a series of datasets which have either been further developed as part of the ACTON project, or where the ACTON project has helped to open them up for a wider range of uses. We will describe these sources in turn.

## Planning application data - the PlanIt website

To investigate the accessibility of new housing developments, it is first necessary to identify where new homes are being built. 

There are over 300 local planning authorities across England, including metropolitan boroughs, London boroughs, unitary authorities and non-metropolitan districts. Each of these planning authorities keeps an online record of current and historic planning applications, such as applications to build new homes. The data recorded will include information about the status of the application, the site location, related applications, a description of the proposed application and links to download associated files such as masterplans and transport assessments. 

However, there is no real standardisation of how these planning applications are recorded. For example, various different types of application exist, such as full, outline, reserved matters, and applications for tree works. Yet the codes that record application type vary from one council to the next.

Moreover, there is no systematic national recording of where homes are being built. The Ministry of Housing, Communities & Local Government produces statistics on the number of new build housing starts and completions in each local planning authority, but this simply records the number of homes in each district. There is no indication of exactly where these homes are being built.

### New developments data from PlanIt

To address this problem, the [PlanIt website](https://www.planit.org.uk/) was developed, prior to the present study. The website aggregates and maps current and historic planning applications across the UK, scraping the data from all planning authority websites (98% coverage), converting this into a single database, and making them accessible from a single source. PlanIt collects all types of planning application, not just applications relating to house building. Updates are made daily.

### PlanIt API

PlanIt has an API (application programming interface, a data interface usable within a programming context) which allows users to search for planning applications using a range of criteria, such as address, planning authority, bounding box, date or planning application identifier.

As part of ACTON (and using funding from an Innovate UK project, StreetFocus), the PlanIt API has been improved to make it easier to search for particular types of planning application.
These updates are based on a development version of PlanIt API that will be incorporated into the [main PlanIt website](https://www.planit.org.uk/) by end of May 2020.

We derived terms for the following searchable fields:

- 'app_size' (for the scale of the proposed development) - including:
    Large = Major, large scale developments;
    Medium = Other applications involving multiple dwellings;
    Small = All others

- 'app_state' (to show the decision status for the application) - including:
    Undecided = The application is currently active, no decision has been made;
    Permitted = The application was approved;
    Conditions = The application was approved, but conditions were imposed;
    Rejected = The application was refused;
    Withdrawn = The application was withdrawn before a decision was taken;
    Referred = The application was referred to government or to another authority;
    Unresolved = The application is no longer active but no decision was made eg split decision;
    Other = Status not known

- 'app_type' (to show the type of application) - including:
    Full = Full and householder planning applications;
    Outline = Proposals prior to a full application, including assessments, scoping opinions, outline applications etc.;
    Amendment = Amendments or alterations arising from existing or previous applications;
    Conditions = Discharge of conditions imposed on existing applications;
    Heritage = Conservation issues and listed buildings;
    Trees = Tree and hedge works;
    Advertising = Advertising and signs;
    Telecoms = Telecommunications including phone masts;
    Other = All other types eg agricultural, electrical

The number of homes built in a residential development is a key factor of interest, along with any other facilities being constructed. This information is difficult to obtain as it is often not present in the description field of planning applications. Proxy methods for assessing scale have therefore been used, such as the number of documents within a planning application and the length of time allowed before deciding a large scale application. For example, criteria for `'app_size' = large` include applications having >100 attached documents and >60 statutory days allowed before a decision is made on the application. 

To ensure this proxy adequately captured the applications of interest we tested it for applications in Leeds, manually identifying applications of differing sizes and ensuring they were correctly classified.

The ongoing further development of PlanIt will have many benefits beyond the ACTON project, since it will make it easier to find planning applications of interest for all sorts of purposes. For example, [StreetFocus.uk](https://www.streetfocus.uk/) makes PlanIt data more widely available, with a public-facing website that brings the PlanIt planning application data together with street-level data on proposals for local improvements to the public realm or to active travel infrastructure. This can be used to help identify places where new developments could potentially help to fund nearby improvements through mechanisms such as S106 agreements. Enabling these synergies to be identified at an early stage in the planning process allows great scope for assisting both the proponents of local improvement schemes and the developers who desire greater certainty in terms of the level of S106 funding they are called on to provide.

## Accessibility data

In assessing the suitability of a proposed site for residential development, one of the most important questions will be how accessible the site is. The provision of local services and community facilities is a key enabler of active travel. It is no use building top quality cycle and walking provision within the site if residents are presented with a 30 minute walk from their homes to reach the local shops.

Journey time statistics published by the Department for Transport record the time taken to reach a range of services such as primary and secondary schools, food stores, GP surgeries, centres of employment and town centres. These are available at the geographical level of the LSOA, an area covering a population of approximately 1500 people or 650 households. They are compiled based on the journey times to the ten closest destinations of each category from each Output Area (OA) centroid within a given LSOA. The statistics are available for all years between 2014 and 2017, and include journey times by three different modes of travel:

- car
- bicycle
- a combined walking / public transport measure, showing the fastest journey time by these two modes (either walking alone or walking and public transport in combination).

The `acton` R package (described below) includes a function for the import of these journey time statistics into R.

## Demographic data

We obtained demographic data from the 2011 census, including the method of travel for journeys to work and journey origin-destination data. With its comprehensive national coverage, this allows us to investigate journey origins and destinations with the high geographical resolution necessary to differentiate new housing developments from neighbouring areas of older housing stock.

Of course, the ACTON project aims to enable the investigation of the many new residential developments that have been built since 2011 and for which travel data is not available, but to do this we need an existing data source to allow methods to be developed. Census data is a key data source for the Propensity to Cycle Tool, and we use the `pct` R package to access this data.

## Routing algorithms

Sources such as census data provide information on journey origins and destinations. Missing from this are the routes that are used to travel from the origin to the destination. These routes must be inferred using routing algorithms.

[CycleStreets.net](https://www.cyclestreets.net/) is a journey planner focusing on routes used for cycling. With a public facing website, CycleStreets.net helps people find a cycle route that is right for them. Such routes range from direct routes appropriate for confident on-road cyclists to quieter routes for people who want to avoid busy roads.

CycleStreets.net includes three routing options, generating 'fast', 'balanced' or 'quiet' cycle routes between journey origins and destinations. For the fast routes, journey time is minimised, with no consideration given to factors such as the busyness of the roads. For the quiet routes, a parameter called 'busyness' is minimised. The balanced routes use a combination of these two approaches, in which both journey time and busyness are taken into account.   

As part of ACTON we have improved the way in which the busyness of particular types of roads, cycle lanes and paths is classified, leading to better quality routing of 'quiet' routes through a more accurate characterisation of the cycleability of route segments. 

### Busyness estimation

New homes often lie close to major roads and bypasses that act as barriers which limit or discourage sustainable modes of travel. By contrast, there are sometimes long established bridleways, towpaths or other paths which could be upgraded.

CycleStreets.net uses a key metric known as 'busyness' to rate each section of a cycle route. This provides a measure of the cycleability of the route and helps determine the suitability of it for each type of rider. It takes into account many features of the streets and paths used for cycling, including the width, speed limits, presence of cycle lanes or dedicated cycle tracks, and obstacles along the way. As part of ACTON the process of setting the busyness score by CycleStreets.net has been further developed. For instance, the scores make a distinction between high-quality, dedicated cycle infrastructure, and shared-use paths which involve sharing often narrow space with pedestrians.

We estimate the busyness of the roads which constitute routes from our case study sites to workplaces or other key destinations. The improved busyness score will allow calculation of an index of average road busyness for the area surrounding each site.

The figure below illustrates the improvements to the routing profile that have been made, with the increased weighting given to protected cycleways clear from the long green segment on the canal towpath. This work has inputted into our Leeds case study, allowing us to estimate the busyness of the roads which constitute routes from case study sites to workplaces or other key destinations, and thus to calculate average road busyness for the area surrounding each site.

```{r}
knitr::include_graphics("https://user-images.githubusercontent.com/361987/78147337-464ba600-742b-11ea-921f-6e02d1e58579.png")
```


## Uptake scenarios

The Propensity to Cycle Tool (PCT) is a well-used national tool for cycle infrastructure planning [@lovelace_propensity_2017]. It uses 2011 Census data and CycleStreets.net routing services to map current cycling levels at high geographic resolutions, as well as a series of scenarios modeling how cycle usage could increase. These scenarios take the same journey origin-destination data from the 2011 Census and estimate how the share of journeys by different methods of travel could change. In particular, the Go Dutch scenario models what would happen if people in the UK cycled as much as those in the Netherlands, accounting for journey distance and hilliness.

An existing limitation of the PCT is the fact that because it uses 2011 census data it does not account for new developments built since 2011. ACTON exists to bridge this gap, by applying PCT methods to new residential areas. An example of this can be found in the Leeds case study described below, where we take journey to work origin-destination data for the LSOAs (Lower Super Output Areas) closest to the new housing sites, reroute this to move the journey origin to the sites themselves rather than the nearest LSOA centroid, then apply the Go Dutch scenario to investigate expected levels of cycling uptake for these routes.

# R package

One of the outputs of this project is the `acton` R package. Available as open source code on GitHub, this includes two main functions that allow users to download planning application and accessibility data, for use in subsequent analysis.

## Installing the R package

To install the `acton` package, run the following commands in an R console (see [here](https://docs.ropensci.org/stats19/articles/stats19-training-setup.html) for information on installing R):

```{r, eval=FALSE, echo=TRUE}
install.packages("remotes")
remotes::install_github("cyipt/acton")
```

After it has been installed, the package can be loaded as follows:

```{r, echo=TRUE}
library(acton)
```

## Functions

The `acton` package contains two main functions:

- get_planit_data()
- get_jts_data()

The function `get_planit_data()` allows R users to search for planning application data without having to use the PlanIt API directly. This can broaden the use of PlanIt by helping to make its data easier to obtain.

The function `get_jts_data()` enables the downloading of journey time statistics. There are 44 tables in total, which include annual data for the years 2014 to 2017. 

## Brief demo

The package can be used to get data on new developments and accessibility as follows:

```{r, eval=FALSE, echo=TRUE}
# download planning application data from a specific postcode (large planning applications only)
planning_data = get_planit_data(pcode = "LS2 9JT", limit = 2, app_size = "large")
planning_data
planning_data$name
planning_data$description

# download planning application data from a specific planning authority (large planning applications only)
planning_data = get_planit_data(auth = "Leeds", limit = 2, app_size = "large")

# these commands show which data is available in each of the Journey Time Statistics tables
jts_tables
unique(jts_tables$table_title)

# this extracts the data from table jts_0101 for the year 2017, skipping the first 7 rows as they are empty
accessibility_data = get_jts_data(table = "jts0101", year = 2017, skip = 7) 
View(accessibility_data)
```

## Further R instructions

To get routes from CycleStreets.net, you will need to set up an API key called CYCLESTREETS. This can be done by installing the `usethis` package and using it to edit the R environment. 

```{r, eval=FALSE, echo=TRUE}
install.packages("usethis")
usethis::edit_r_environ()
```

You can then add the CYCLESTREETS key to the R environment by typing `CYCLESTREETS=<insert API key name>`

# Leeds case study

The data sources described above were explored for a case study of new housing developments in Leeds. We investigated accessibility across the city by active travel modes. Using CycleStreets.net for journey routing, we look at journeys to work for the residents of four new housing sites.  

## Planning applications

Data from [PlanIt](https://www.planit.org.uk/), accessed using the `acton` R package, was used to identify recent large planning applications within the city boundaries. 

The following code gets and subsets the relevant PlanIt data for Leeds. This extracts large applications where planning consent has been granted:


```{r, echo=TRUE}
applications_leeds = get_planit_data(
  limit = 500,
  auth = "Leeds",
  app_size = "large",
  app_state = "permitted",
  silent = TRUE
  )
```


```{r}
knitr::include_graphics("https://user-images.githubusercontent.com/52210872/77913768-c12a8a80-728c-11ea-963f-e6bad2decd38.png")
```

The resulting data provides rich information about the planning applications, an overview of which is shown in the figure above.

## The four chosen sites

From the 281 large planning applications identified as described above, we have selected four of these in which the descriptions reveal that more than 100 homes have been consented.

An overview of the four case study sites is shown in the map below.

```{r, echo=FALSE}
knitr::include_graphics("https://user-images.githubusercontent.com/1825120/78660650-5e0ca980-78c5-11ea-81c7-dc446965ce51.png")
```

See https://cyipt.github.io/acton/articles/case-studies.html for more on the case study sites.

We will describe the Allerton Bywater application in more depth as we use this site to illustrate our investigation of road busyness and routing, before describing the other development sites.

### Allerton Bywater Millennium Community

- One of a series of Millennium Communities, the development at Allerton Bywater was announced by John Prescott in 1998. The homes lie on the site of Allerton Colliery, which was the last remaining colliery in Leeds when it closed in 1995. Prior to the development, Allerton Bywater village had a population of around 4,000, and the aim was to incorporate the whole of the village in the project, rather than solely focusing on the site itself. For example, a £500,000 community fund was made available to the parish council to spend on local projects, and community buildings in the village were also refurbished. In total there was £24 million upfront public investment by English Partnerships and the Homes and Communities Agency. This included drainage, site clearance and decontamination. 

- The development incorporates new industrial and office units as well as homes, with high environmental standards for both of these. A design code was adopted and development of the site began in 2005. The industrial units at the east of the site were the first in the UK to meet the Building Research Establishment Environmental Assessment Method (BREEAM) 'Excellent' standard, while the new homes were built to the EcoHomes 'Excellent' standard or the Code for Sustainable Homes Level 3. A number of homes were built under a 'Design for Manufacture' competition for a construction cost of no more than £60,000.

- In total there are 562 homes in the Millennium Community. A Sustrans cycle route passes through the site and there is good walking and cycling access to the rest of the village and its surrounds, although parts of the cycle route can get very muddy in winter. Local services such as shops, pubs, cafes, a primary school, park, community centre and nature reserve lie on the edge of the site or within easy walking distance.

- Plans for buses to be routed through the site did not materialise. The village lies eight miles southeast of Leeds and the buses to Leeds run roughly every 30 minutes. There are more frequent services to Garforth and Castleford. The nearest railway station is Castleford, at 43 minutes walk, with a well-built riverside path to follow. Much of the Millennium Community is designed as a HomeZone with shared space streets, although these tend to fill up with parked cars. Initial phases were built with 1.6 parking spaces per dwelling, but the amount of on-street parking lead to calls to increase this and later phases have 2 parking spaces per dwelling.

The planning application we have selected from PlanIt.org.uk to represent the Allerton Bywater site relates to the final phase of the Millennium Community. This includes 189 homes and has planning consent 13/05235/FU.

This is classified by PlanIt.org.uk as a large application. The application was submitted in December 2013 by Keepmoat Homes and the Homes and Communities Agency and was approved in November 2014.

Data available through the `acton` R package includes links to the full PlanIt record and to planning application information from Leeds City Council, as illustrated in
the online version of this report at
https://cyipt.github.io/acton/articles/the-acton-project.html.


### Leeds Climate Innovation District

- Situated on the banks of the River Aire, close to Leeds city centre, the Climate Innovation District is being developed by Leeds-based firm Citu. The development is built around high environmental standards including low carbon timber-framed homes with high levels of insulation and a Mechanical Ventilation Heat Recovery System preventing the need for gas central heating. The homes will be served by solar panels on-site via a private-wire network; a Community Interest Company will be set up that will own the utility cooperative. 

- A new foot/cycle bridge has been erected over the River Aire to connect the two halves of the site and allow a traffic-free route into the city centre. On-site car parking is in an undercroft; these spaces have to be purchased at a cost of £15,000. Cycle parking is available on-site.

- In total there will be over 520 new homes. Phase 1 to the north of the river will contain 312 dwellings, with planning consent 15/00415/FU. 

### Micklefield

- Planning consent 15/01973/FU is for a development of 292 residential dwellings by house builders Barratt Homes and Persimmon Homes on greenfield land in the village of Micklefield, nine miles east of Leeds. 

- The site does not fully meet the Leeds Core Strategy Accessibility Standards. There are bus stops nearby but the services are infrequent, with only an hourly service increasing to two an hour at peak times. However, Micklefield station allows access to Leeds city centre with a 20 minute journey time. The S106 agreement includes £8000 for improved cycle facilities at the station. It also mandates 15% affordable housing, of which 60% is for social rent.

### Tyersal

- Planning consent 15/04151/FU was gained in April 2016 for a 270 dwelling development on a greenfield site at Tysersal Lane by developer Gleeson Homes. Although the site lies within ths bounds of Leeds it is actually closer to Bradford, and the only road access is to west, via the Bradford suburb of Holme Wood. Regular buses to Bradford city centre pass by the edge of the site. The proposed parking provision is approximately two spaces per dwelling. 

- The site does not fully meet the Leeds Core Strategy Accessibility Standards. A viability assessment was accepted, stating that the scheme could not provide all of the usual planning gain contributions (S106 monies), with no affordable homes due to be built on site. This is subject on ongoing review. Gleeson's state that their homes are priced at a level so that they can be afforded by 90% of local people in full time employment.

## Accessibility indicators

Journey time statistics (JTS) are available from the Department for Transport recording accessibility at the geographical level of the LSOA (an area covering approximately 1500 residents or 650 households). The statistics include average minimum travel times to key local services and destinations, such as town centres, centres of employment, primary schools, secondary schools, food stores and GP surgeries. 

Travel times are calculated for three modes of travel - by car, by cycle, and by a mode that combines walking and public transport.

For an example of the code used to download journey time data, see the [case studies vignette](https://cyipt.github.io/acton/articles/case-studies.html) on the ACTON website. 
We use this to map journey times across Leeds and West Yorkshire.

Multiple statistics are available for access to centres of employment, including travel time to locations with 100-499 jobs, to locations with 500-4999 jobs, and to locations with 5000+ jobs. We combined these three statistics, giving them weightings of 100, 500 and 5000 respectively, to produce a single weighted access to employment metric.
This is shown in the maps below.

```{r, echo=FALSE}
knitr::include_graphics("https://user-images.githubusercontent.com/52210872/76424159-c7b99680-639f-11ea-95c5-1198d977be1f.png")
```

We have then combined the weighted access to employment measure with the measures for access to food stores, town centres, primary schools, secondary schools and GP surgeries, to calculate the average journey time across these six destination types. By adding together all of these scores we have generated a single accessibility index for each mode of travel. 

```{r, echo=FALSE}
knitr::include_graphics("https://user-images.githubusercontent.com/52210872/76458014-bdb08b80-63d1-11ea-88dd-a5da8020ea5d.png")
```

According to these measures, there are many areas that have poor accessibility by active modes and public transport. We can see that three of the four case study sites are located in areas that have relatively poor accessibility to local services. Tyersal, Micklefield and Allerton Bywater are all in areas where, according to our combined index, local services are >15 minutes distant on average by walking or public transport. Micklefield is in an area where local services are >20 minutes distant by cycling.

## Travel to work and route busyness

Journeys to work by case study site residents are estimated based on origin-destination (OD) data of commuter journeys for the LSOA having a population weighted centroid closest to each site. These journeys are allocated to the transport network using CycleStreets.net routing algorithms.
The point of origin was updated so rather than starting at the nearest LSOA centroid, the routes start within the case study sites themselves. This gives 'desire lines' from the origin to the destination, which were then converted to routes using the 'fastest journey' option of the `cyclestreets::journey()` function and the routing capabilities in the R package **stplanr** [@lovelace_stplanr_2018]. 

The busyness of each route segment is estimated according to CycleStreets.net protocols. These allocate busyness values to roads and paths according to factors such as the quality of cycle provision and the road classification.

We will illustrate this for the Allerton Bywater case study site. The thickness of the lines in the map below, which illustrates route busyness data, is proportional to the number of journeys (using all modes of transport), and the colour represents the busyness of the roads. 

```{r}
knitr::include_graphics("https://user-images.githubusercontent.com/52210872/73958076-43d34100-48ff-11ea-80a3-f06f8205e8d2.png")
```

The image below shows the total number of commuter journeys to each destination. These numbers represent total commuter journeys from the closest LSOA at the time of the 2011 Census. 

```{r}
knitr::include_graphics("https://user-images.githubusercontent.com/52210872/76435138-8977a380-63ae-11ea-8569-7bb3ec4441c9.png")
```

Here we can see which of these commutes would be made by bicycle under a Go Dutch scenario in which cycling uptake is equivalent to that in the Netherlands. It is clear that shorter journeys, such as from Allerton Bywater south to Castleford, have greater cycling uptake than longer journeys such as those to Leeds city centre.

```{r}
knitr::include_graphics("https://user-images.githubusercontent.com/52210872/75472896-24728580-598c-11ea-8ab5-94809a8bb404.png")
```

# Modelling active travel

The final component of the ACTON project is a prototype indicator for active travel levels of new homes.
Using data from new housing developments built prior to the 2011 Census, we started development of a model to predict cycling levels to and from new homes, building on the methods underlying the Propensity to Cycle Tool [@lovelace_propensity_2017].

As a response variable we use the proportion of commuters who cycle to work. This is available at the Output Area level, allowing us to obtain high resolution data that precisely matches the geographical bounds of the new development sites. 

Similarly to the Propensity to Cycle Tool, the explanatory variables include the distance and hilliness of journeys to work. However, we also include the average busyness of the streets, which is not one of the parameters in the PCT. To calculate these, we route journeys using the CycleStreets.net 'fast' route algorithm. Workplace destinations are obtained and routing carried out at LSOA level, to minimise the computational intensity of journey routing.

For the prototype version of this model we have used data from 12 sites across England, including Allerton Bywater in Leeds. The number of sites will expand as we further develop this into a national model. The range of explanatory variables can also be expanded further as more data becomes available, adding factors such as the circuity of the routes. 

## Sites used in the prototype model

Desire lines from the 12 sites to places of work are shown below. 

```{r, out.width="80%"}
knitr::include_graphics("https://user-images.githubusercontent.com/52210872/78140363-cbca5880-7421-11ea-92e7-740543f0e2e6.png")
```

We then convert these straight lines into routes on the road network, using the CycleStreets.net routing service.

```{r, out.width="80%"}
knitr::include_graphics("https://user-images.githubusercontent.com/52210872/78127314-cfeb7b80-740b-11ea-9d39-ce320930b698.png")
```

These route can be combined to form route networks, thus revealing the numbers of people expected to use each road or path segment. Here we show the route network under a Go Dutch scenario in which cycling rates are equivalent to those found in the Netherlands. 

```{r, out.width="80%"}
# routes_to_site = sf::read_sf("https://github.com/cyipt/acton/releases/download/0.0.1/routes-all-sites.geojson")
# plot(sf::st_geometry(routes_to_site))
# names(routes_to_site)
system("wget https://user-images.githubusercontent.com/1825120/77967965-2064bb00-72de-11ea-9e23-f703ccde4a39.png")
knitr::include_graphics("77967965-2064bb00-72de-11ea-9e23-f703ccde4a39.png")
```

Zooming in to a single site, we can see the route network in more detail.

## Model fitting

We use the `glm()` R package, with a quasibinomial probability distribution and a logit link function, since the proportion of commuters who cycle represents the result of a series of binomial trials.

Having investigated various candidate explanatory variables for distance and hilliness, including interaction terms, the following model was found to provide the best fit, with an R squared of 8.9%.

```{r, eval=FALSE, echo = TRUE}
m_cycling = glm(pcycle ~
                   distance_m + # d1
                   distance_m^2 + # d3
                   average_incline +    # h1
                   busyness,
                 data = sf::st_drop_geometry(r_grouped_census_joined),
                 family = quasibinomial(),
                 weights = all
)
```

# Conclusions

The ACTON project has successfully demonstrated that combining multiple sources of data in a single analysis can provide a strong, actionable evidence-base for improving active travel provision associated with new developments.
Although the input datasets used by ACTON were already in the public domain, they were scattered across multiple websites making them hard to access, let alone use as the basis of evidence-based decision-making.

The methods have been demonstrated using real-world developments from a case study of Leeds.
Furthermore, these methods have been implemented in new software, the `acton` R package, which represents a step change in the accessibility of vital sources of data for policymakers and planners:

- Data on new developments is now far more accessible to researchers and others without needing to write API queries via the new function `get_planit_data()`
- Data on accessibility is now far more accessible to researchers via the new function `get_jts_data()`, which gets data from DfT's open Journey Time Statistics

These functions and the datasets they open-up provide a strong foundation for further work.
The methods are modular, meaning they can be combined with additional approaches such as spatial network analysis [@cooper_predictive_2018] and pre-existing scenarios of active transport uptake [@goodman_scenarios_2019].
We plan to work with potential funders to ensure that the value generated in the course of this 3 month project can be made available to everyone, either as a self-standing tool or as part of a wider toolkit for sustainable transport planning.

Details about follow-on work will be posted on the project's issue tracker at https://github.com/cyipt/acton/issues, where interested stakeholders are welcome to post ideas and follow-on questions.

# References

<!-- Original content: -->

<!-- # Active Transport Options for New Developments -->

<!-- This project will provide evidence for local authorities, developers and civil society groups to support planning and investment in sustainable transport infrastructure that enables trips to new developments to be made by active modes, walking and cycling. -->
<!-- It will deliver three main things: evidence on the current level of provision for walking and cycling; evidence on the potential for likely trips to and from the new developments to be made by walking and cycling (including cycling potential to major trip attractors such as cities centres and cycling potential to public transport links); and visualisations of the options available to improve provision. -->

<!-- See the package website at https://cyipt.github.io/acton/ -->

<!-- ## Project stages -->

<!-- ### Current level of provision: -->

<!-- - (issue #11, #7) first we need to identify the locations of the developments we are researching. Basic info required will include the date of completion and the number of homes. We will focus on larger developments in Leeds, Cambridge and the A350 corridor - those of 500+ homes - but we could also look at medium-sized developments. -->
<!-- - (issue #8) start with an example housing development in Leeds as a prototype dataset. -->
<!-- - scoping exercise on the nature of OSM data. Is the development properly mapped? Compare Mastermap v OSM, to validate the OSM data.  -->
<!-- - routability validation. THe quality of new data can vary. We must be sure the data is topographically correct. Are nodes connected? A visual check can be made using Keepright. -->
<!-- - (issue #5, #10) identify destinations. These could include shops, schools, health centres, major employment centres, town centres, and public transport (rail/bus) nodes.  -->
<!-- - identify routes from the development to these destinations. Perhaps use the development centroid as the starting point of these routes? -->
<!-- - (issue #9) assess the quality of the provision. In OSM we can see whether cycleways are separate from traffic/pedestrians, the width etc. We can use this to categorise the quality of cycle infrastructure, potentially into 8 classes or 'cycling states'.  -->
<!-- - similarly, investigate how to categorise the quality of walking routes. -->
<!-- - compare quality of walking/cycle provision within the development with provision beyond the development boundary, on the routes used for accessing key destinations. -->
<!-- - compare the distance of crow-fly v on-road walk/cycle routes -->
<!-- - compare existing walk/cycle route times with driving route times -->
<!-- - (issue #6) look at severance of walk/cycle routes (eg by major roads that cut off the development from nearby areas) -->


<!-- ### Potential for cycling and walking: -->

<!-- - this would assess optimal cycling and walking from development locations, based on their location in regard to the destinations we have already identified.  -->
<!-- - use the fastest route on CycleStreets.net, but also look at crow-fly distances because new developments are often characterised by very circuitous roads. See http://www.makingspaceforcycling.org/#principles for an example of this. -->
<!-- - (issue #9) look at the difference between the quiet and fast routes, as identified by CycleStreets.net.  -->
<!-- - model cycle potential as a function of time taken to cycle v time taken to drive -->
<!-- - (issue #4) for many developments (especially those that tend to represent urban sprawl) the two key areas for improvement are likely to be improvements to major roads to allow cycling/walking, and the creation of new links that don't exist at present. -->


<!-- ### Options available to improve provision: -->

<!-- - generate automated suggestions for innovations - these will be of two main types: -->
<!--   1) identify the existing streets that should be improved and how they should be improved -->
<!--   2) identify the new links that should be added  -->
<!-- - assess what difference these innovations would make for cycling/walking uptake -->


<!-- ## Outputs and Outcomes -->

<!-- We will generate clean data on cycling and walking provision and potential. -->

<!-- Create prototype map visualising this data. -->

<!-- A report setting out the policy impact - potentially a peer-reviewed paper. -->

